FROM debian:bookworm-20210902-slim

LABEL maintainer=<nic.cheneweth@thoughtworks.com>

# minimum packages required for use as a circleci remote-docker primary container
RUN apt-get update && \
    apt-get install --no-install-recommends -y \
            git=1:2.33.0-1 \
            openssh-server=1:8.4p1-6 \
            tar=1.34+dfsg-1 \
            gzip=1.10-4 \
            ca-certificates=20210119 && \
    echo "deb http://deb.debian.org/debian unstable main non-free contrib" >> /etc/apt/sources.list && \
    apt-get update && \
    apt-get install --no-install-recommends -y \
            libc6=2.32-3 \
            libc-bin=2.32-3 \
            libgcrypt20=1.9.4-3 && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*
    # unstable main packages containing CVE fixes
    # https://snyk.io/vuln/SNYK-DEBIANUNSTABLE-LIBGCRYPT20-1582893
    # https://snyk.io/vuln/SNYK-DEBIANUNSTABLE-GLIBC-1296896
